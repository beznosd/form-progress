{"version":3,"sources":["src/form-progress.js","node_modules/auto-reload-brunch/vendor/auto-reload.js"],"names":["formProgress","settings","form","inputTypes","formElements","progress","proggressAttr","proggressStyleProperty","initialValue","maxValue","unit","formSelector","progressSelector","document","querySelector","console","error","map","item","toLowerCase","formLength","forEach","formElement","querySelectorAll","length","progressStep","currentProgress","indexOf","addEventListener","evt","input","target","type","value","progressChecked","arrayToLowerCase","arr","window","WebSocket","MozWebSocket","br","brunch","ar","disabled","_ar","cacheBuster","url","date","Math","round","Date","now","toString","replace","browser","navigator","userAgent","forceRepaint","reloaders","page","location","reload","stylesheet","slice","call","filter","link","val","getAttribute","href","setTimeout","body","offsetHeight","javascript","scripts","textScripts","script","text","srcScripts","src","loaded","all","onLoad","eval","remove","newScript","createElement","async","onload","head","appendChild","port","host","server","hostname","connect","connection","onmessage","event","message","data","reloader","onerror","readyState","close","onclose"],"mappings":"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","file":"dist/form-progress.js","sourcesContent":[";(function() {\n  const formProgress = (settings) => {\n    let { \n      form,\n      inputTypes,\n      formElements,\n      progress, \n      proggressAttr,\n      proggressStyleProperty,\n      initialValue,\n      maxValue,\n      unit,\n    } = settings;\n\n    /*\n    *  initializing of all values\n    */\n\n    const formSelector = form || '#progress-form';\n    const progressSelector = progress || '#progress-element';\n    proggressAttr = proggressAttr || 'style';\n    proggressStyleProperty = proggressStyleProperty || 'width';\n    initialValue = +initialValue || 0;\n    maxValue = +maxValue || 100;\n    unit = unit || '%';\n\n    form = document.querySelector(formSelector);\n    progress = document.querySelector(progressSelector);\n\n    if (!form) {\n      console.error(`Can\\'t get the form element by selector: ${formSelector}`);\n      return;\n    }\n\n    if (!progress) {\n      console.error(`Can\\'t get the progress element by selector: ${progressSelector}`);\n      return;\n    }\n\n    if (!inputTypes) {\n      inputTypes = [\n        'text', 'email', 'password', 'number', 'color', \n        'date', 'datetime', 'month', 'time', 'range', \n        'tel', 'search', 'url', 'week'\n      ];\n    } else {\n      // make all input types lowercase\n      inputTypes = inputTypes.map(item => item.toLowerCase());\n    }\n\n    if (!formElements) {\n      formElements = ['input', 'textarea', 'select'];\n    } else {\n      // make all input types lowercase\n      formElements = formElements.map(item => item.toLowerCase());\n    }\n\n    /*\n    *  calculating the initial values \n    */\n\n    // find the count of all elements and inputs which we need to track\n    // console.log( form.querySelectorAll('textarea').length );\n    let formLength = 0;\n    formElements.forEach((formElement) => {\n      if (formElement === 'input') {\n        inputTypes.forEach((item) => {\n          formLength += form.querySelectorAll(`input[type=\"${item}\"]`).length;\n        });\n      } else {\n        formLength += form.querySelectorAll(formElement).length;\n      }\n    });\n\n    const progressStep = maxValue / formLength;\n    let currentProgress = initialValue;\n\n    /*\n    * handling the form events\n    */\n    \n    // adding listener for text format inputs\n    if (formElements.indexOf('input') !== -1 || formElements.indexOf('textarea') !== -1) {\n      form.addEventListener('input', (evt) => {\n        const input = evt.target;\n\n        if (inputTypes.indexOf(input.type) !== -1 || formElements.indexOf('textarea') !== -1) {\n          // increase progress\n          if (input.value.length !== 0 && !input.progressChecked) {\n            currentProgress += progressStep;\n\n            progress[proggressAttr][proggressStyleProperty] = currentProgress + unit;              \n\n            input.progressChecked = true;\n          }\n\n          // decrease progress\n          if (input.value.length === 0 && input.progressChecked) {\n            currentProgress -= progressStep;\n\n            progress[proggressAttr][proggressStyleProperty] = currentProgress + unit;              \n\n            input.progressChecked = false;\n          }\n        }\n      }); // end form.addEventListener for input\n    } // end form elements check\n  }; // end formProgress\n\n  function arrayToLowerCase(arr) {\n    return arr.map(item => item.toLowerCase());\n  }\n\n  window.formProgress = formProgress;\n}());","/* jshint ignore:start */\n(function() {\n  var WebSocket = window.WebSocket || window.MozWebSocket;\n  var br = window.brunch = (window.brunch || {});\n  var ar = br['auto-reload'] = (br['auto-reload'] || {});\n  if (!WebSocket || ar.disabled) return;\n  if (window._ar) return;\n  window._ar = true;\n\n  var cacheBuster = function(url){\n    var date = Math.round(Date.now() / 1000).toString();\n    url = url.replace(/(\\&|\\\\?)cacheBuster=\\d*/, '');\n    return url + (url.indexOf('?') >= 0 ? '&' : '?') +'cacheBuster=' + date;\n  };\n\n  var browser = navigator.userAgent.toLowerCase();\n  var forceRepaint = ar.forceRepaint || browser.indexOf('chrome') > -1;\n\n  var reloaders = {\n    page: function(){\n      window.location.reload(true);\n    },\n\n    stylesheet: function(){\n      [].slice\n        .call(document.querySelectorAll('link[rel=stylesheet]'))\n        .filter(function(link) {\n          var val = link.getAttribute('data-autoreload');\n          return link.href && val != 'false';\n        })\n        .forEach(function(link) {\n          link.href = cacheBuster(link.href);\n        });\n\n      // Hack to force page repaint after 25ms.\n      if (forceRepaint) setTimeout(function() { document.body.offsetHeight; }, 25);\n    },\n\n    javascript: function(){\n      var scripts = [].slice.call(document.querySelectorAll('script'));\n      var textScripts = scripts.map(function(script) { return script.text }).filter(function(text) { return text.length > 0 });\n      var srcScripts = scripts.filter(function(script) { return script.src });\n\n      var loaded = 0;\n      var all = srcScripts.length;\n      var onLoad = function() {\n        loaded = loaded + 1;\n        if (loaded === all) {\n          textScripts.forEach(function(script) { eval(script); });\n        }\n      }\n\n      srcScripts\n        .forEach(function(script) {\n          var src = script.src;\n          script.remove();\n          var newScript = document.createElement('script');\n          newScript.src = cacheBuster(src);\n          newScript.async = true;\n          newScript.onload = onLoad;\n          document.head.appendChild(newScript);\n        });\n    }\n  };\n  var port = ar.port || 9485;\n  var host = br.server || window.location.hostname || 'localhost';\n\n  var connect = function(){\n    var connection = new WebSocket('ws://' + host + ':' + port);\n    connection.onmessage = function(event){\n      if (ar.disabled) return;\n      var message = event.data;\n      var reloader = reloaders[message] || reloaders.page;\n      reloader();\n    };\n    connection.onerror = function(){\n      if (connection.readyState) connection.close();\n    };\n    connection.onclose = function(){\n      window.setTimeout(connect, 1000);\n    };\n  };\n  connect();\n})();\n/* jshint ignore:end */\n"]}