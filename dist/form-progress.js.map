{"version":3,"sources":["src/form-progress.js"],"names":["formProgress","settings","form","inputTypes","formElements","progress","proggressAttr","proggressStyleProperty","initialValue","maxValue","units","additionalElementsToTrack","formSelector","progressSelector","document","querySelector","console","error","map","item","toLowerCase","changeableAdditinalElments","inputtableAdditinalElments","forEach","selector","elements","querySelectorAll","element","type","concat","formLength","existingElements","formElementType","length","aditionalElements","aditionalElementsCount","aditionalElement","indexOf","progressStep","currentProgress","addEventListener","evt","input","target","tagName","value","progressChecked","increaseProgress","decreaseProgress","checked","window"],"mappings":"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","file":"dist/form-progress.js","sourcesContent":[";(function() {\n  const formProgress = (settings = {}) => {\n    let { \n      form,\n      inputTypes,\n      formElements,\n      progress, \n      proggressAttr,\n      proggressStyleProperty,\n      initialValue,\n      maxValue,\n      units,\n      additionalElementsToTrack\n    } = settings;\n\n    /*\n    *  initializing of all values\n    */\n\n    const formSelector = form || '#progress-form';\n    const progressSelector = progress || '#progress-element';\n    proggressAttr = proggressAttr || 'style';\n    proggressStyleProperty = proggressStyleProperty || 'width';\n    initialValue = +initialValue || 0;\n    maxValue = +maxValue || 100;\n    units = units || '%';\n\n    form = document.querySelector(formSelector);\n    progress = document.querySelector(progressSelector);\n\n    if (!form) {\n      console.error(`Can\\'t get the form element by selector: ${formSelector}`);\n      return;\n    }\n\n    if (!progress) {\n      console.error(`Can\\'t get the progress element by selector: ${progressSelector}`);\n      return;\n    }\n\n    if (!inputTypes) {\n      inputTypes = [\n        'text', 'email', 'password', 'number', 'color', \n        'date', 'datetime', 'month', 'time', 'week', \n        'tel', 'search', 'url', 'range'\n      ];\n    } else {\n      // make all input types lowercase\n      inputTypes = inputTypes.map(item => item.toLowerCase());\n    }\n\n    if (!formElements) {\n      formElements = ['input', 'textarea', 'select'];\n    } else {\n      // make all input types lowercase\n      formElements = formElements.map(item => item.toLowerCase());\n    }\n  \n    // handle aditional elements and separate them to changeable and inputtable\n    let changeableAdditinalElments = [];\n    let inputtableAdditinalElments = [];\n    if (additionalElementsToTrack) {\n      additionalElementsToTrack.forEach((selector) => {\n        const elements = form.querySelectorAll(selector);\n        // console.log(elements);\n        elements.forEach((element) => {\n          // console.log(element);\n          if (element.type === 'checkbox') {\n            changeableAdditinalElments = changeableAdditinalElments.concat(...elements);\n          } else {\n            inputtableAdditinalElments = inputtableAdditinalElments.concat(...elements);\n          }\n        });\n      });\n    }\n\n    // console.log(changeableAdditinalElments);\n    // console.log(inputtableAdditinalElments);\n    // console.log(formElements);\n    // console.log(inputTypes);\n\n    /*\n    *  calculating the initial values \n    */\n\n    // find the count of all elements and inputs which we need to track\n    // console.log( form.querySelectorAll('textarea').length );\n    let formLength = 0;\n    let existingElements = [];\n    formElements.forEach((formElementType) => {\n      if (formElementType === 'input') {\n        inputTypes.forEach((item) => {\n          const elements = form.querySelectorAll(`input[type=\"${item}\"]`);\n          existingElements = existingElements.concat(...elements);\n          formLength += elements.length;\n        });\n      } else {\n        const elements = form.querySelectorAll(formElementType);\n        existingElements = existingElements.concat(...elements);\n        formLength += elements.length;\n      }\n    });\n\n    // if aditional elements matches default input types, do not increase formLength\n    if (additionalElementsToTrack) {\n      const aditionalElements = [...changeableAdditinalElments, ...inputtableAdditinalElments];\n      let aditionalElementsCount = aditionalElements.length;\n\n      aditionalElements.forEach((aditionalElement) => {\n        if (existingElements.indexOf(aditionalElement) > -1) {\n          aditionalElementsCount--;\n        }\n      });\n\n      formLength += aditionalElementsCount;\n    }\n\n    const progressStep = (maxValue - initialValue) / formLength;\n    let currentProgress = initialValue;\n\n    // initializing progress with initial value, by default 0\n    progress[proggressAttr][proggressStyleProperty] = currentProgress + units;\n\n    /*\n    * handling the form events\n    */\n    \n    // adding listener for text format inputs\n    if (formElements.indexOf('input') > -1 \n        || formElements.indexOf('textarea') > -1\n        || inputtableAdditinalElments.length) {\n      form.addEventListener('input', (evt) => {\n        let input = null;\n        if (inputTypes.indexOf(evt.target.type) > -1) {\n          input = evt.target;\n        }\n        if (formElements.indexOf('textarea') > -1 && evt.target.tagName === 'TEXTAREA') {\n          input = evt.target;\n        }\n        // handle aditional elements checkboxes\n        if (inputtableAdditinalElments.indexOf(evt.target) > -1) {\n          input = evt.target;\n        }\n\n        if (!input) return;\n        \n        // increase progress\n        if (input.value.length !== 0 && !input.progressChecked) {\n          increaseProgress();\n          input.progressChecked = true;\n        }\n\n        // decrease progress\n        if (input.value.length === 0 && input.progressChecked) {\n          // console.log(input.value.length);\n          // console.log(input.progressChecked);\n          decreaseProgress();\n          input.progressChecked = false;\n        }\n      }); // end text format inputs\n\n      // adding support for checkbox and radio\n      // preventing of attaching event if we have not checkboxes and changeableAdditinalElments \n      if (formElements.indexOf('input') > -1 \n          && (inputTypes.indexOf('checkbox') > -1 || changeableAdditinalElments.length)) {\n        form.addEventListener('change', (evt) => {\n          let input = null;\n          // handle checkboxex\n          if (inputTypes.indexOf('checkbox') > -1 && evt.target.type === 'checkbox') {\n            input = evt.target;\n          }\n          // handle aditional elements checkboxes\n          if (changeableAdditinalElments.indexOf(evt.target) > -1) {\n            input = evt.target;\n          }\n          \n          if (!input) return;\n\n          // increase progress\n          if (input.checked && !input.progressChecked) {\n            increaseProgress();\n            input.progressChecked = true;\n          }\n\n          // decrease progress\n          if (!input.checked && input.progressChecked) {\n            decreaseProgress();\n            input.progressChecked = false;\n          }\n        });\n      }\n    } // end form elements check\n\n    function increaseProgress() {\n      currentProgress += progressStep;\n      if (currentProgress > maxValue) {\n        currentProgress = maxValue;\n      }\n      progress[proggressAttr][proggressStyleProperty] = currentProgress + units;              \n    }\n\n    function decreaseProgress() {\n      currentProgress -= progressStep;\n      if (currentProgress < initialValue) {\n        currentProgress = initialValue;\n      }\n      progress[proggressAttr][proggressStyleProperty] = currentProgress + units;              \n    }\n  }; // end formProgress\n\n\n  window.formProgress = formProgress;\n}());"]}